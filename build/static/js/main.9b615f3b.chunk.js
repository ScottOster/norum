(this.webpackJsonpnorum=this.webpackJsonpnorum||[]).push([[0],{28:function(t,e,n){},54:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),s=n(21),i=n.n(s),r=(n(28),n(7),n(8)),o=n(2),l=n(3),u=n(5),d=n(4),h=n(23),m=n.n(h).a.create({baseURL:"https://norum-news-forum.herokuapp.com/api"}),j=function(t,e,n,a,c){return m.get("/articles",{params:{topic:t,sort_by:e,order:n,limit:a,p:c}}).then((function(t){var e=t.data;return console.dir(e),e.articles}))},p=function(t,e,n){return m.post("/articles/".concat(t,"/comments"),{username:n,body:e}).then((function(t){return t.data.postedComment}))},b=function(t){return m.delete("/comments/".concat(t)).then((function(t){return t.status}))},f=function(t,e,n){return"comment"===n?m.patch("/comments/".concat(t),{inc_votes:e}).then((function(t){t.data})):"article"===n?m.patch("/articles/".concat(t),{inc_votes:e}).then((function(t){t.data})):void 0},O=n(0),v=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={topics:[]},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;m.get("/topics").then((function(t){return t.data.topics})).then((function(e){t.setState({topics:e})}))}},{key:"render",value:function(){var t=this.state.topics;return Object(O.jsxs)("nav",{className:"NavTopics",children:[" ",Object(O.jsx)(r.a,{className:"NavLink",to:"/",children:"all"},"allTopicsLink"),t.map((function(t){return Object(O.jsx)(r.a,{className:"NavLink",to:"/".concat(t.slug),children:t.slug},t.slug)}))]})}}]),n}(a.Component),g=n(9),x=function(t){var e=t.articles;return Object(O.jsxs)("main",{className:"ArticlesPages",children:[" ",e.map((function(t){return Object(O.jsxs)("section",{className:"ArticlesCard",children:[Object(O.jsxs)("h1",{className:"ArticlesTitle",children:[t.title,", by ",t.author]}),Object(O.jsxs)("p",{className:"ArticleStats",children:[" Topic : ",t.topic]}),Object(O.jsxs)("p",{className:"ArticleStats",children:["Posted On: ",t.created_at]}),Object(O.jsxs)("p",{className:"ArticleStats",children:[" ","Comments : ",t.comment_count," Votes: ",t.votes]}),Object(O.jsx)(r.a,{to:"/articles/".concat(t.article_id),className:"ReadArticleLink",children:"READ ARTICLE"})]},t.article_id)}))," "]})},y=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={articles:[],isLoading:!0,sort_by:"",order:"desc",page:1,limit:8,infScrollLoading:"Scroll down for more articles"},t.handleClick=function(e){if("desc"===t.state.order){var n=e.target.id;t.setState({sort_by:n,order:"asc"})}else{var a=e.target.id;t.setState({sort_by:a,order:"desc"})}},t.infiniteScroll=function(){if(window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight){var e=t.state.limit;e+=5,t.setState({infScrollLoading:"Getting More News....."}),setTimeout((function(){t.setState({limit:e})}),1200)}},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.topic,n=this.state.sort_by,a=this.state.order,c=this.state.page,s=this.state.limit;j(e,n,a,s,c).then((function(e){t.setState({articles:[].concat(Object(g.a)(t.state.articles),Object(g.a)(e)),isLoading:!1})}))}},{key:"componentDidUpdate",value:function(t,e){var n=this;window.addEventListener("scroll",this.infiniteScroll);var a=this.props.topic,c=this.state.sort_by,s=this.state.order,i=this.state.page,r=this.state.limit;a===t.topic&&c===e.sort_by&&s===e.order&&r===e.limit||j(a,c,s,r,i).then((function(t){n.setState({articles:Object(g.a)(t),isLoading:!1,infScrollLoading:"Scroll down for more articles"})}))}},{key:"render",value:function(){return this.state.isLoading?Object(O.jsx)("p",{children:"Page is loading......."}):Object(O.jsxs)("section",{children:[Object(O.jsxs)("h3",{className:"SortBySect",children:[Object(O.jsx)("button",{id:"created_at",className:"SortButton",onClick:this.handleClick,children:"Date \u21c5"}),Object(O.jsx)("button",{id:"comment_count",className:"SortButton",onClick:this.handleClick,children:"Comments \u21c5"}),Object(O.jsx)("button",{id:"votes",className:"SortButton",onClick:this.handleClick,children:"Votes \u21c5"})]}),Object(O.jsx)(x,{articles:this.state.articles}),Object(O.jsx)("p",{className:"ScrollLoadingMessage",children:this.state.infScrollLoading})]})}}]),n}(a.Component),S=function(t){var e=t.status,n=t.message;return Object(O.jsxs)("p",{children:["ERR CODE: ",e,":",n]})},C=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={author:"cooljmessy",body:""},t.handleChange=function(e){var n=e.target.value;t.setState({body:n})},t.handleSubmit=function(e){e.preventDefault(),e.target.reset();var n=t.props.path,a=t.state,c=a.body,s=a.author;p(n,c,s).then((function(e){t.props.updateState(e)}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsx)("section",{id:"PostCommentSection",children:Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsx)("textarea",{className:"CommentTextArea",onChange:this.handleChange,placeholder:"Comment Away, and be kind!",rows:"25",cols:"40"}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"SubmitButton",type:"submit"})})]})})}}]),n}(a.Component),N=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={author:"cooljmessy"},t.handleClick=function(e){var n=t.props.comment_id;t.props.deleteFromState(n),b(n)},t}return Object(l.a)(n,[{key:"render",value:function(){return this.props.author===this.state.author?Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"DeleteButton",onClick:this.handleClick})}):null}}]),n}(a.Component),k=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={author:"cooljmessy",voteChange:0},t.updateVotesState=function(e,n,a){t.upVoteButton.setAttribute("disabled","disabled"),t.downVoteButton.setAttribute("disabled","disabled"),t.setState((function(t){return{voteChange:t.voteChange+n}})),f(e,n,a)},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.props.card_id,n=this.props.card_type,a=this.props.currVotes+this.state.voteChange;return this.props.author!==this.state.author?Object(O.jsxs)("div",{className:"VoteHandlerMain",children:[Object(O.jsx)("button",{className:"UpVoteButton",ref:function(e){t.upVoteButton=e},onClick:function(){t.updateVotesState(e,1,n)}}),Object(O.jsx)("p",{children:a}),Object(O.jsx)("button",{className:"DownVoteButton",ref:function(e){t.downVoteButton=e},onClick:function(){t.updateVotesState(e,-1,n)}})]}):null}}]),n}(a.Component),_=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={comments:[],isLoading:!0},t.deleteFromState=function(e){var n=t.state.comments.filter((function(t){return e!==t.comment_id?t:null}));t.setState({comments:n})},t.updateState=function(e){t.setState((function(t){return{comments:[].concat(Object(g.a)(e),Object(g.a)(t.comments))}}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;(function(t){return m.get("/articles/".concat(t,"/comments")).then((function(t){return t.data}))})(this.props.path).then((function(e){t.setState({comments:e,isLoading:!1})}))}},{key:"render",value:function(){var t=this;return Object(O.jsxs)("main",{children:[" ",Object(O.jsx)(C,{path:this.props.path,updateState:this.updateState}),this.state.comments.map((function(e){return Object(O.jsxs)("section",{className:"CommentsCard",children:[Object(O.jsxs)("h4",{children:[" Comment by: ",e.author," "]}),Object(O.jsxs)("p",{className:"CommentBody",children:[" ",e.body," "]}),Object(O.jsx)(k,{currVotes:e.votes,card_id:e.comment_id,author:e.author,card_type:"comment"}),Object(O.jsx)(N,{deleteFromState:t.deleteFromState,comment_id:e.comment_id,author:e.author})]},e.comment_id)}))]})}}]),n}(a.Component),A=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={article:[],isLoading:!0},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t,e=this,n=this.props.article_id;(t=n,m.get("articles/".concat(t)).then((function(t){return t.data.article}))).then((function(t){e.setState({article:t,isLoading:!1})}))}},{key:"render",value:function(){var t=this.state.isLoading,e=this.props.article_id,n=this.state.article.author,a=this.state.article.votes;if(t)return Object(O.jsx)("p",{children:"Page is loading...."});var c=this.state.article;return Object(O.jsxs)("main",{children:[Object(O.jsxs)("section",{className:"SingleArticleCard",children:[Object(O.jsxs)("h2",{className:"SingleArticleTitle",children:[c.title,", by ",c.author]}),Object(O.jsx)("p",{className:"SingleArticleText",children:c.body}),Object(O.jsx)(k,{card_id:e,card_type:"article",author:n,currVotes:a})]}),Object(O.jsx)(_,{path:e})]})}}]),n}(a.Component),L=n.p+"static/media/norum-logo-2.92bf29a0.png";var w=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("section",{className:"HeaderImageSect",children:Object(O.jsx)("img",{src:L,className:"HeaderImage"})}),Object(O.jsx)(v,{}),Object(O.jsxs)(r.b,{children:[Object(O.jsx)(y,{path:"/"}),Object(O.jsx)(y,{path:"/:topic"}),Object(O.jsx)(A,{path:"articles/:article_id"}),Object(O.jsx)(S,{default:!0,status:404,message:"Oh No! Invalid path!"})]})]})},B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),s(t),i(t)}))};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),B()},7:function(t,e,n){}},[[54,1,2]]]);
//# sourceMappingURL=main.9b615f3b.chunk.js.map